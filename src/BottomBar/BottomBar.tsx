import React from 'react';
import "./BottomBar.css";
import {PlaylistInterface, SongInterface, SongPlaylistInterface} from "../Slices/playlistsSlice";
import {useSelector} from "react-redux";
import {State} from "../store";
import HeartButton from "../HeartButton";
import {secToMinSec} from "../utils";

const BottomBar = () => {
    const currentSong:SongPlaylistInterface = useSelector((state: State) => state.playlists.currentSong);
    const top50:PlaylistInterface[] = useSelector((state: State) => state.playlists.top50);

    const style = (color1: string, color2: string) => {
        let deg: string = "";
        if(currentSong.playlist.title === "Liked Songs")
            deg = "135deg,"
        return {
            background: "linear-gradient("+ deg + color1 + "," + color2 + ")"
        };
    }



    if(currentSong !== null){
        const song: SongInterface = currentSong.song;
        const playlist: PlaylistInterface = currentSong.playlist;
        let isPlaylistInTop50: boolean = false;

        top50.map((playlist: PlaylistInterface) => {
            if(playlist.id === currentSong.playlist.id){
                isPlaylistInTop50 = true
            }
            return null;
        })

        return <div id={"bottom-bar"}>
            <div className={"bottom-bar-left"}>
                <div className={"bottom-bar-playlist-img"} style={style(playlist.color1, playlist.color2)}>
                    {playlist.title === "Liked Songs" ?
                        (<div style={{margin: "27px 0 0 27px"}}><svg width="20" height="20" viewBox="0 0 55 51" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M39.7203 0.650208C37.2031 0.689361 34.7408 1.39204 32.5821 2.68728C30.4233 3.98252 28.6446 5.82446 27.4255 8.02708C26.2064 5.82446 24.4276 3.98252 22.2689 2.68728C20.1102 1.39204 17.6479 0.689361 15.1307 0.650208C11.118 0.824549 7.33737 2.57994 4.61481 5.53288C1.89224 8.48581 0.449032 12.3963 0.600483 16.4099C0.600483 31.5548 25.0917 49.047 26.1334 49.7891L27.4255 50.7034L28.7176 49.7891C29.7593 49.0515 54.2505 31.5548 54.2505 16.4099C54.4019 12.3963 52.9587 8.48581 50.2362 5.53288C47.5136 2.57994 43.733 0.824549 39.7203 0.650208Z" fill="white"/>
                        </svg></div>) : (<div></div>)
                    }
                    {isPlaylistInTop50 ?
                        (<div className={'bottom-bar-div-top-50'}>
                            <h2>TOP 50</h2>
                            <h2 style={{marginTop : "5px"}}>{currentSong.playlist.title}</h2>
                        </div>) : (<div></div>)
                    }
                </div>
                <div className={"bottom-bar-left-div-song"}>
                    <p className={"bottom-bar-song-title"}>{song.title}</p>
                    <p className={"bottom-bar-song-artist"}>{song.artist}</p>
                </div>
                <div className={"bottom-bar-heart-button-div"}>
                    <HeartButton songTitle={song.title} songArtist={song.artist} size={19}/>
                </div>
            </div>
            <div className={"bottom-bar-center"}>
                <div className={"bottom-bar-center-top"}>
                    <svg className={"bottom-bar-center-elt"} width="21" height="18" viewBox="0 0 21 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.3395 12.4905C13.876 12.3443 13.2842 11.9633 12.622 11.3003C12.0535 10.7438 11.467 10.0268 10.867 9.24528C10.723 9.43653 10.5797 9.62778 10.4357 9.82278C10.0435 10.3538 9.64224 10.89 9.23349 11.4173C10.6615 13.1498 12.1435 14.8508 14.341 15.1313V17.1563L20.0072 13.8863L14.3402 10.614V12.4905H14.3395ZM4.89399 5.95053C5.46099 6.50553 6.04749 7.22253 6.64899 8.00403C6.79449 7.80753 6.94149 7.61403 7.08849 7.41303C7.48032 6.8809 7.87835 6.35337 8.28249 5.83053C6.75849 3.98253 5.18274 2.15028 2.73549 2.06253H0.110493V4.68753H2.73549C3.22674 4.66728 3.99699 5.05128 4.89399 5.94978V5.95053ZM14.3395 4.75578V6.65778L20.0065 3.38553L14.3395 0.113281V2.09853C12.9115 2.26353 11.7707 3.10953 10.777 4.08153C9.12924 5.71953 7.68924 7.95753 6.26799 9.73653C4.86774 11.5643 3.46299 12.6518 2.73399 12.564H0.108994V15.189H2.73399C4.37274 15.1665 5.64399 14.2395 6.73899 13.1693C8.38449 11.5313 9.82599 9.29403 11.2465 7.51578C12.4037 6.00303 13.5595 5.01078 14.3395 4.75578Z" fill="#C4C4C4"/>
                    </svg>
                    <svg className={"bottom-bar-center-elt"} style={{marginLeft : "35px"}} width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.6667 0.041626L2.62501 6.49996L11.6667 12.9583V0.041626ZM2.62501 6.49996V0.041626H0.0416718V12.9583H2.62501V6.49996Z" fill="#C4C4C4"/>
                    </svg>
                    <svg className={"bottom-bar-center-elt"} style={{marginLeft : "23px"}} width="43" height="43" viewBox="0 0 43 43" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21.5 0.25C17.2971 0.25 13.1887 1.49629 9.69413 3.83127C6.19958 6.16625 3.47592 9.48505 1.86755 13.368C0.259192 17.2509 -0.161629 21.5236 0.658307 25.6457C1.47824 29.7678 3.50211 33.5542 6.47398 36.526C9.44584 39.4979 13.2322 41.5218 17.3543 42.3417C21.4764 43.1616 25.7491 42.7408 29.632 41.1324C33.5149 39.5241 36.8337 36.8004 39.1687 33.3059C41.5037 29.8113 42.75 25.7029 42.75 21.5C42.75 18.7094 42.2003 15.9461 41.1324 13.368C40.0645 10.7898 38.4993 8.44723 36.526 6.47398C34.5528 4.50074 32.2102 2.93547 29.632 1.86756C27.0539 0.799648 24.2906 0.25 21.5 0.25ZM17.3543 28.5V13.381L29 21.5L17.3543 28.5Z" fill="white"/>
                    </svg>
                    <svg className={"bottom-bar-center-elt"} style={{marginLeft : "23px"}} width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0.333342 0.041626L9.37501 6.49996L0.333342 12.9583V0.041626ZM9.37501 6.49996V0.041626H11.9583V12.9583H9.37501V6.49996Z" fill="#C4C4C4"/>
                    </svg>
                    <svg className={"bottom-bar-center-elt"} style={{marginLeft : "35px"}} width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16.15 5.33805C16.2776 5.33805 16.3953 5.38205 16.4888 5.45575L16.5625 5.52505L16.5812 5.54705C17.2203 6.33911 17.627 7.29297 17.7562 8.30247C17.8854 9.31196 17.732 10.3375 17.313 11.265C16.894 12.1925 16.2259 12.9855 15.383 13.5559C14.5401 14.1262 13.5555 14.4515 12.5387 14.4955L12.3 14.4999H5.69999C5.58882 14.5 5.47767 14.4967 5.36669 14.49L7.18939 16.3105C7.28034 16.4017 7.33642 16.5218 7.34788 16.6501C7.35933 16.7783 7.32544 16.9065 7.25209 17.0123L7.18939 17.0893C7.09825 17.1803 6.97809 17.2364 6.84985 17.2478C6.72161 17.2593 6.59341 17.2254 6.48759 17.152L6.41059 17.0893L3.66059 14.3393C3.56965 14.2482 3.51356 14.128 3.50211 13.9998C3.49065 13.8716 3.52455 13.7434 3.59789 13.6375L3.66059 13.5605L6.41059 10.8105C6.5076 10.7131 6.63759 10.6555 6.77494 10.6492C6.91229 10.6428 7.04704 10.6881 7.15263 10.7762C7.25823 10.8643 7.32701 10.9887 7.34542 11.1249C7.36383 11.2612 7.33053 11.3994 7.25209 11.5123L7.18939 11.5893L5.38869 13.3889L5.54269 13.3977L5.69999 13.3999H12.3C13.1309 13.4 13.9449 13.1648 14.6477 12.7216C15.3505 12.2783 15.9134 11.6451 16.2713 10.8952C16.6292 10.1453 16.7675 9.30942 16.6701 8.48424C16.5727 7.65905 16.2436 6.8783 15.721 6.23235C15.6564 6.15147 15.616 6.05402 15.6043 5.95119C15.5926 5.84836 15.6102 5.74432 15.655 5.65102C15.6998 5.55773 15.77 5.47898 15.8576 5.42381C15.9451 5.36864 16.0465 5.33929 16.15 5.33915V5.33805ZM10.8106 0.910546C10.9017 0.819603 11.0219 0.763518 11.1501 0.752061C11.2784 0.740603 11.4066 0.7745 11.5124 0.847846L11.5894 0.910546L14.3394 3.66055L14.4021 3.73755C14.4655 3.82939 14.4994 3.93835 14.4994 4.04995C14.4994 4.16154 14.4655 4.2705 14.4021 4.36235L14.3394 4.43935L11.5894 7.18935L11.5124 7.25205C11.4205 7.31543 11.3116 7.34938 11.2 7.34938C11.0884 7.34938 10.9794 7.31543 10.8876 7.25205L10.8106 7.18935L10.7479 7.11235C10.6845 7.0205 10.6506 6.91154 10.6506 6.79995C10.6506 6.68835 10.6845 6.57939 10.7479 6.48755L10.8106 6.41055L12.6113 4.61095L12.4573 4.60215L12.3 4.59995H5.69999C4.86837 4.5999 4.05376 4.83553 3.35058 5.27953C2.6474 5.72353 2.08445 6.35772 1.72697 7.10859C1.36949 7.85947 1.23213 8.69627 1.33081 9.52202C1.42948 10.3478 1.76015 11.1286 2.28449 11.7741C2.37216 11.891 2.40982 12.0379 2.38919 12.1825C2.36856 12.3271 2.29133 12.4576 2.17449 12.5452C2.11664 12.5887 2.0508 12.6202 1.98074 12.6382C1.91068 12.6562 1.83776 12.6602 1.76616 12.6499C1.62155 12.6293 1.49106 12.5521 1.40339 12.4352C0.768724 11.642 0.366167 10.6884 0.240364 9.68033C0.114561 8.67223 0.270427 7.64899 0.690678 6.72408C1.11093 5.79916 1.77914 5.00871 2.62122 4.44039C3.46329 3.87206 4.44632 3.54807 5.46129 3.50435L5.69999 3.49995H12.3C12.4122 3.49995 12.5233 3.50325 12.6333 3.50985L10.8106 1.68935L10.7479 1.61235C10.6745 1.50653 10.6406 1.37833 10.6521 1.25009C10.6636 1.12185 10.7196 1.00169 10.8106 0.910546Z" fill="#C4C4C4"/>
                    </svg>
                </div>
                <div className={"bottom-bar-center-bottom"}>
                    <h2 className={"bottom-bar-center-elt"} style={{marginRight: "5px"}}>0:00</h2>
                    <svg className={"bottom-bar-center-elt"} width="633" height="7" viewBox="0 0 633 7" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="633" height="7" rx="2.5" fill="#535353"/>
                    </svg>
                    <h2 className={"bottom-bar-center-elt"} style={{marginLeft: "5px"}}>{secToMinSec(currentSong.song.duration)}</h2>
                </div>
            </div>
            <div className={"bottom-bar-right"}>
                <svg className={"bottom-bar-center-elt"} width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18.1263 10.6003C18.8866 9.4063 19.1415 7.95916 18.8348 6.57725C18.5281 5.19534 17.685 3.99186 16.491 3.23156C15.297 2.47127 13.8498 2.21643 12.4679 2.52312C11.086 2.82981 9.88252 3.6729 9.12223 4.86692L9.08116 4.92165L9.04894 4.98202C8.31157 6.16429 8.06805 7.58887 8.37082 8.94895C8.41082 9.13563 8.46184 9.31978 8.52362 9.50043L4.74411 18.0937C4.62959 18.3537 4.61205 18.6461 4.69469 18.9179C4.77733 19.1897 4.95466 19.4229 5.19451 19.5751L6.46058 20.3812C6.69997 20.5342 6.98626 20.5962 7.2675 20.5561C7.54873 20.516 7.80627 20.3765 7.99339 20.1627L14.1811 13.1028C14.3709 13.0824 14.5593 13.0507 14.7454 13.008C16.1059 12.707 17.2937 11.8837 18.0531 10.7154L18.0941 10.6607L18.1263 10.6003ZM17.6452 6.89068C17.8406 7.76632 17.7448 8.68183 17.3724 9.49804L10.44 5.08384C10.9416 4.49734 11.5969 4.06239 12.3321 3.82787C13.0674 3.59334 13.8535 3.56855 14.602 3.75626C15.3506 3.94398 16.032 4.33678 16.5696 4.89049C17.1072 5.4442 17.4797 6.13688 17.6452 6.89068ZM7.09762 19.3808L5.83156 18.5746L9.22361 10.8732C10.0341 12.0178 11.2611 12.7991 12.6411 13.0493L7.09762 19.3808ZM9.53012 8.69166C9.33467 7.81602 9.43047 6.90051 9.80293 6.08429L10.44 5.08384L17.3724 9.49804C16.8707 10.0845 15.5784 11.5199 14.8432 11.7545C14.1079 11.989 13.3218 12.0138 12.5732 11.8261C11.8247 11.6384 11.1433 11.2456 10.6057 10.6919C10.0681 10.1381 9.69564 9.44545 9.53012 8.69166Z" fill="#C4C4C4"/>
                </svg>
                <svg className={"bottom-bar-center-elt"} style={{marginLeft: "23px"}} width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 19H28V21H10V19Z" fill="#C4C4C4"/>
                    <path d="M19 14H28V16H19V14Z" fill="#C4C4C4"/>
                    <path d="M10 24H28V26H10V24Z" fill="#C4C4C4"/>
                    <path d="M10 9L16 13.5L10 18V9Z" fill="#C4C4C4"/>
                </svg>
                <svg className={"bottom-bar-center-elt"} style={{marginLeft: "21px"}} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19.5 18.0038H4.5C4.1023 18.0034 3.721 17.8452 3.43978 17.564C3.15856 17.2828 3.0004 16.9015 3 16.5038V6.00378C3.0004 5.60608 3.15856 5.22478 3.43978 4.94356C3.721 4.66234 4.1023 4.50418 4.5 4.50378H19.5C19.8977 4.50418 20.279 4.66234 20.5602 4.94356C20.8414 5.22478 20.9996 5.60608 21 6.00378V16.5038C20.9994 16.9014 20.8412 17.2826 20.56 17.5638C20.2788 17.845 19.8976 18.0032 19.5 18.0038ZM4.5 6.00378V16.5038H19.5V6.00378H4.5Z" fill="#1B9145"/>
                    <path d="M1.5 19.5038H22.5V21.0038H1.5V19.5038Z" fill="#1B9145"/>
                </svg>
                <svg className={"bottom-bar-center-elt"} style={{marginLeft: "18px"}} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 4.25001C15 3.17101 13.726 2.60001 12.92 3.31601L8.427 7.30901C8.28986 7.43118 8.11266 7.49879 7.929 7.49901H4.25C3.65326 7.49901 3.08097 7.73606 2.65901 8.15802C2.23705 8.57997 2 9.15227 2 9.74901V14.246C2 14.8427 2.23705 15.415 2.65901 15.837C3.08097 16.259 3.65326 16.496 4.25 16.496H7.93C8.11366 16.4962 8.29086 16.5638 8.428 16.686L12.919 20.68C13.725 21.396 15 20.824 15 19.746V4.25001ZM9.425 8.43001L13.5 4.80701V19.189L9.425 15.565C9.01319 15.1986 8.48121 14.9961 7.93 14.996H4.25C4.05109 14.996 3.86032 14.917 3.71967 14.7763C3.57902 14.6357 3.5 14.4449 3.5 14.246V9.75001C3.5 9.55109 3.57902 9.36033 3.71967 9.21968C3.86032 9.07902 4.05109 9.00001 4.25 9.00001H7.93C8.48121 8.99987 9.01319 8.79739 9.425 8.43101V8.43001Z" fill="#B3B3B3"/>
                    <path d="M18.992 5.89702C19.0712 5.83845 19.1611 5.79605 19.2567 5.77224C19.3523 5.74843 19.4516 5.74368 19.549 5.75826C19.6464 5.77284 19.74 5.80646 19.8244 5.85721C19.9089 5.90796 19.9824 5.97483 20.041 6.05402C21.3162 7.77391 22.0031 9.85897 22 12C22.0028 14.1412 21.3155 16.2262 20.04 17.946C19.9192 18.0988 19.7437 18.1985 19.5506 18.2242C19.3576 18.2498 19.1621 18.1994 19.0056 18.0835C18.8491 17.9676 18.7437 17.7954 18.7119 17.6033C18.6801 17.4112 18.7242 17.2142 18.835 17.054C19.9192 15.5923 20.5031 13.8199 20.5 12C20.5031 10.1801 19.9192 8.40772 18.835 6.94602C18.7764 6.86684 18.734 6.77689 18.7102 6.68132C18.6864 6.58574 18.6817 6.48642 18.6962 6.38901C18.7108 6.2916 18.7445 6.19801 18.7952 6.1136C18.8459 6.02918 18.9128 5.95559 18.992 5.89702Z" fill="#B3B3B3"/>
                    <path d="M17.143 8.37002C17.2296 8.32305 17.3246 8.2936 17.4226 8.28336C17.5206 8.27312 17.6196 8.28228 17.7141 8.31033C17.8085 8.33837 17.8965 8.38475 17.973 8.44681C18.0495 8.50887 18.1131 8.5854 18.16 8.67202C18.696 9.66202 19 10.797 19 12C19.0017 13.162 18.7129 14.306 18.16 15.328C18.0653 15.5031 17.905 15.6333 17.7143 15.6901C17.5235 15.747 17.3181 15.7257 17.143 15.631C16.968 15.5363 16.8377 15.376 16.7809 15.1853C16.7241 14.9945 16.7453 14.7891 16.84 14.614C17.26 13.837 17.5 12.948 17.5 12C17.5 11.052 17.26 10.163 16.84 9.38602C16.7931 9.29936 16.7637 9.2043 16.7535 9.10627C16.7433 9.00824 16.7526 8.90917 16.7807 8.81472C16.8089 8.72027 16.8554 8.63229 16.9175 8.55582C16.9797 8.47934 17.0563 8.41587 17.143 8.36902V8.37002Z" fill="#B3B3B3"/>
                </svg>
                <svg className={"bottom-bar-center-elt"} style={{marginLeft: "11px"}} width="116" height="5" viewBox="0 0 116 5" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="116" height="5" rx="2.5" fill="#C4C4C4"/>
                </svg>
                <svg className={"bottom-bar-center-elt"} style={{marginLeft: "11px"}} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M16 4H20V8" stroke="#B3B3B3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M14 10L20 4" stroke="#B3B3B3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8 20H4V16" stroke="#B3B3B3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 20L10 14" stroke="#B3B3B3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M15 4.25001C15 3.17101 13.726 2.60001 12.92 3.31601L8.427 7.30901C8.28986 7.43118 8.11266 7.49879 7.929 7.49901H4.25C3.65326 7.49901 3.08097 7.73606 2.65901 8.15802C2.23705 8.57997 2 9.15227 2 9.74901V14.246C2 14.8427 2.23705 15.415 2.65901 15.837C3.08097 16.259 3.65326 16.496 4.25 16.496H7.93C8.11366 16.4962 8.29086 16.5638 8.428 16.686L12.919 20.68C13.725 21.396 15 20.824 15 19.746V4.25001ZM9.425 8.43001L13.5 4.80701V19.189L9.425 15.565C9.01319 15.1986 8.48121 14.9961 7.93 14.996H4.25C4.05109 14.996 3.86032 14.917 3.71967 14.7763C3.57902 14.6357 3.5 14.4449 3.5 14.246V9.75001C3.5 9.55109 3.57902 9.36033 3.71967 9.21968C3.86032 9.07902 4.05109 9.00001 4.25 9.00001H7.93C8.48121 8.99987 9.01319 8.79739 9.425 8.43101V8.43001Z" fill="black"/>
                    <path d="M18.992 5.89702C19.0712 5.83845 19.1611 5.79605 19.2567 5.77224C19.3523 5.74843 19.4516 5.74368 19.549 5.75826C19.6464 5.77284 19.74 5.80646 19.8244 5.85721C19.9089 5.90796 19.9824 5.97483 20.041 6.05402C21.3162 7.77391 22.0031 9.85897 22 12C22.0028 14.1412 21.3155 16.2262 20.04 17.946C19.9192 18.0988 19.7437 18.1985 19.5506 18.2242C19.3576 18.2498 19.1621 18.1994 19.0056 18.0835C18.8491 17.9676 18.7437 17.7954 18.7119 17.6033C18.6801 17.4112 18.7242 17.2142 18.835 17.054C19.9192 15.5923 20.5031 13.8199 20.5 12C20.5031 10.1801 19.9192 8.40772 18.835 6.94602C18.7764 6.86684 18.734 6.77689 18.7102 6.68132C18.6864 6.58574 18.6817 6.48642 18.6962 6.38901C18.7108 6.2916 18.7445 6.19801 18.7952 6.1136C18.8459 6.02918 18.9128 5.95559 18.992 5.89702Z" fill="black"/>
                    <path d="M17.143 8.37002C17.2296 8.32305 17.3246 8.2936 17.4226 8.28336C17.5206 8.27312 17.6196 8.28228 17.7141 8.31033C17.8085 8.33837 17.8965 8.38475 17.973 8.44681C18.0495 8.50887 18.1131 8.5854 18.16 8.67202C18.696 9.66202 19 10.797 19 12C19.0017 13.162 18.7129 14.306 18.16 15.328C18.0653 15.5031 17.905 15.6333 17.7143 15.6901C17.5235 15.747 17.3181 15.7257 17.143 15.631C16.968 15.5363 16.8377 15.376 16.7809 15.1853C16.7241 14.9945 16.7453 14.7891 16.84 14.614C17.26 13.837 17.5 12.948 17.5 12C17.5 11.052 17.26 10.163 16.84 9.38602C16.7931 9.29936 16.7637 9.2043 16.7535 9.10627C16.7433 9.00824 16.7526 8.90917 16.7807 8.81472C16.8089 8.72027 16.8554 8.63229 16.9175 8.55582C16.9797 8.47934 17.0563 8.41587 17.143 8.36902V8.37002Z" fill="black"/>
                </svg>
            </div>
        </div>;
    }

    return <div id={"bottom-bar"}>
    </div>;

};



export default BottomBar;
